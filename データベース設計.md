# データベース設計
1. テーブル設計
- companies テーブル（会社情報）

| カラム名        | 型            | 説明        |
| ----------- | ------------ | --------- |
| id          | INT          | 会社ID（主キー） |
| name        | VARCHAR(255) | 会社名       |
| address     | VARCHAR(255) | 会社住所（任意）  |
| created\_at | TIMESTAMP    | 作成日時      |
| updated\_at | TIMESTAMP    | 更新日時      |

- users テーブル（ユーザー情報）

| カラム名                | 型                         | 説明               |
| ------------------- | ------------------------- | ---------------- |
| id                  | INT                       | ユーザーID（主キー）      |
| name                | VARCHAR(100)              | ユーザー名            |
| email               | VARCHAR(100)              | メールアドレス          |
| email\_verified\_at | TIMESTAMP                 | メール認証日時          |
| password            | VARCHAR(255)              | パスワード（ハッシュ）      |
| role                | ENUM('admin', 'staff') | ユーザーの役割（管理者、従業員） |
| company\_id         | INT                       | 所属会社ID（外部キー）     |
| created\_at         | TIMESTAMP                 | 作成日時             |
| updated\_at         | TIMESTAMP                 | 更新日時             |

- attendance テーブル（勤怠情報）

| カラム名            | 型                                       | 説明                 |
| --------------- | --------------------------------------- | ------------------ |
| id              | INT                                     | 勤怠ID（主キー）          |
| user\_id        | INT                                     | ユーザーID（外部キー）       |
| company\_id     | INT                                     | 会社ID（外部キー）         |
| clock\_in       | DATETIME                                | 出勤時間               |
| clock\_out      | DATETIME                                | 退勤時間               |
| work\_hours     | FLOAT                                   | 実働時間（時間単位）         |
| overtime\_hours | FLOAT                                   | 残業時間（時間単位）         |
| status          | ENUM('pending', 'approved', 'rejected') | 勤怠ステータス（未承認、承認、拒否） |
| break\_minutes  | INT                                     | 休憩時間（分）            |
| created\_at     | TIMESTAMP                               | 作成日時               |
| updated\_at     | TIMESTAMP                               | 更新日時               |


- attendance_status テーブル（勤怠ステータス管理）

| カラム名           | 型                                       | 説明                 |
| -------------- | --------------------------------------- | ------------------ |
| id             | INT                                     | ステータスID（主キー）       |
| attendance\_id | INT                                     | 勤怠ID（外部キー）         |
| status         | ENUM('pending', 'approved', 'rejected') | 勤怠ステータス（未承認、承認、拒否） |
| updated\_by    | INT                                     | 更新者ID（外部キー）        |
| reason         | TEXT                                    | 理由（任意）             |
| created\_at    | TIMESTAMP                               | 作成日時               |
| updated\_at    | TIMESTAMP                               | 更新日時               |

- attendance_history テーブル（勤怠変更履歴）

| カラム名           | 型            | 説明                                   |
| -------------- | ------------ | ------------------------------------ |
| id             | INT          | 履歴ID（主キー）                            |
| attendance\_id | INT          | 勤怠ID（外部キー）                           |
| field\_changed | VARCHAR(100) | 変更されたフィールド名（例：clock\_in, clock\_out） |
| old\_value     | TEXT         | 変更前の値                                |
| new\_value     | TEXT         | 変更後の値                                |
| updated\_by    | INT          | 変更を行ったユーザーID（外部キー）                   |
| created\_at    | TIMESTAMP    | 作成日時                                 |

- vacations テーブル（休暇情報）

| カラム名           | 型                                         | 説明                 |
| -------------- | ----------------------------------------- | ------------------ |
| id             | INT                                       | 休暇ID（主キー）          |
| user\_id       | INT                                       | ユーザーID（外部キー）       |
| vacation\_type | ENUM('paid', 'sick', 'unpaid', 'special') | 休暇タイプ（有給、病欠、無給、特別） |
| start\_date    | DATE                                      | 休暇開始日              |
| end\_date      | DATE                                      | 休暇終了日              |
| reason         | TEXT                                      | 休暇理由               |
| created\_at    | TIMESTAMP                                 | 作成日時               |
| updated\_at    | TIMESTAMP                                 | 更新日時               |


2. データベース設計の関係性
- users テーブル は companies テーブル に company_id として外部キー制約を持ち、各ユーザーがどの会社に所属しているかを管理します。

- attendance テーブル は users テーブル と companies テーブル に外部キー制約を持ち、従業員の勤怠情報を管理します。

- attendance_status テーブル は attendance テーブル に外部キー制約を持ち、勤怠情報のステータス（承認待ち、承認済み、拒否）を管理します。

- attendance_history テーブル は attendance テーブル と users テーブル に外部キー制約を持ち、勤怠情報の変更履歴を管理します。

- vacations テーブル は users テーブル に外部キー制約を持ち、従業員の休暇情報を管理します。


- リレーション
  - users と attendances は 1対多 のリレーション。
  - 1人のユーザーが複数の勤怠情報を持つ。